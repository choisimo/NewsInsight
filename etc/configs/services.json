{
  "$schema": "./services.schema.json",
  "version": "1.1.0",
  "description": "NewsInsight service configuration profiles with Consul service discovery",
  
  "services": {
    "api-gateway": {
      "name": "API Gateway",
      "description": "Spring Boot API Gateway service",
      "port": 8000,
      "healthcheck": "/actuator/health",
      "hostname": "api-gateway",
      "dependencies": ["postgres", "mongo", "redis", "consul", "redpanda"],
      "consul": {
        "register": true,
        "service_name": "api-gateway",
        "tags": ["gateway", "api", "spring-boot"]
      },
      "profiles": {
        "development": {
          "replicas": 1,
          "resources": {
            "memory": "512Mi",
            "cpu": "250m"
          },
          "env": {
            "SPRING_PROFILES_ACTIVE": "development",
            "LOG_LEVEL": "DEBUG",
            "JAVA_OPTS": "-Xms128m -Xmx256m"
          }
        },
        "staging": {
          "replicas": 1,
          "resources": {
            "memory": "1Gi",
            "cpu": "500m"
          },
          "env": {
            "SPRING_PROFILES_ACTIVE": "staging",
            "LOG_LEVEL": "DEBUG",
            "JAVA_OPTS": "-Xms256m -Xmx512m"
          }
        },
        "production": {
          "replicas": 3,
          "resources": {
            "memory": "2Gi",
            "cpu": "1000m"
          },
          "env": {
            "SPRING_PROFILES_ACTIVE": "production",
            "LOG_LEVEL": "INFO",
            "JAVA_OPTS": "-Xms256m -Xmx512m"
          }
        }
      }
    },
    
    "collector-service": {
      "name": "Data Collector Service",
      "description": "News data collection and processing service",
      "port": 8081,
      "healthcheck": "/actuator/health",
      "hostname": "collector-service",
      "dependencies": ["postgres", "mongo", "redis", "consul", "redpanda"],
      "consul": {
        "register": true,
        "service_name": "collector-service",
        "tags": ["collector", "data", "spring-boot"]
      },
      "profiles": {
        "development": {
          "replicas": 1,
          "resources": {
            "memory": "512Mi",
            "cpu": "250m"
          },
          "env": {
            "SPRING_PROFILES_ACTIVE": "development",
            "LOG_LEVEL": "DEBUG",
            "JAVA_OPTS": "-Xms128m -Xmx256m"
          }
        },
        "staging": {
          "replicas": 1,
          "resources": {
            "memory": "1Gi",
            "cpu": "500m"
          },
          "env": {
            "SPRING_PROFILES_ACTIVE": "staging",
            "LOG_LEVEL": "DEBUG",
            "JAVA_OPTS": "-Xms256m -Xmx512m"
          }
        },
        "production": {
          "replicas": 2,
          "resources": {
            "memory": "2Gi",
            "cpu": "1000m"
          },
          "env": {
            "SPRING_PROFILES_ACTIVE": "production",
            "LOG_LEVEL": "INFO",
            "JAVA_OPTS": "-Xms256m -Xmx512m"
          }
        }
      }
    },
    
    "browser-use-api": {
      "name": "Browser-Use API",
      "description": "AI-powered browser automation service",
      "port": 8500,
      "healthcheck": "/health",
      "hostname": "browser-use-api",
      "dependencies": [],
      "consul": {
        "register": true,
        "service_name": "browser-use-api",
        "tags": ["browser", "automation", "python"]
      },
      "profiles": {
        "development": {
          "replicas": 1,
          "resources": {
            "memory": "1Gi",
            "cpu": "500m"
          },
          "env": {
            "PYTHONUNBUFFERED": "1",
            "LOG_LEVEL": "DEBUG"
          }
        },
        "staging": {
          "replicas": 1,
          "resources": {
            "memory": "2Gi",
            "cpu": "1000m"
          },
          "env": {
            "PYTHONUNBUFFERED": "1",
            "LOG_LEVEL": "DEBUG"
          }
        },
        "production": {
          "replicas": 2,
          "resources": {
            "memory": "4Gi",
            "cpu": "2000m"
          },
          "env": {
            "PYTHONUNBUFFERED": "1",
            "LOG_LEVEL": "INFO"
          }
        }
      }
    },
    
    "autonomous-crawler": {
      "name": "Autonomous Crawler",
      "description": "Autonomous web crawling and data extraction service",
      "port": 9090,
      "api_port": 8030,
      "healthcheck": "/health",
      "hostname": "autonomous-crawler",
      "dependencies": ["postgres", "mongo", "redis", "browser-use-api", "web-crawler"],
      "consul": {
        "register": true,
        "service_name": "autonomous-crawler",
        "tags": ["crawler", "autonomous", "python"]
      },
      "profiles": {
        "development": {
          "replicas": 1,
          "resources": {
            "memory": "512Mi",
            "cpu": "250m"
          },
          "env": {
            "LOG_LEVEL": "DEBUG",
            "LLM_PROVIDER": "custom",
            "LLM_OPENAI_MODEL": "gpt-4o",
            "LLM_ANTHROPIC_MODEL": "claude-3-5-sonnet-20241022",
            "LLM_OPENROUTER_MODEL": "anthropic/claude-3.5-sonnet",
            "LLM_OPENROUTER_BASE_URL": "https://openrouter.ai/api/v1",
            "LLM_OLLAMA_MODEL": "llama3.1",
            "LLM_OLLAMA_BASE_URL": "http://localhost:11434",
            "LLM_AZURE_API_VERSION": "2024-02-15-preview",
            "LLM_CUSTOM_BASE_URL": "https://workflow.nodove.com/webhook/aidove",
            "LLM_CUSTOM_MODEL": "aidove",
            "LLM_CUSTOM_REQUEST_FORMAT": "{\"chatInput\": \"{prompt}\"}",
            "LLM_CUSTOM_RESPONSE_PATH": "reply"
          }
        },
        "staging": {
          "replicas": 1,
          "resources": {
            "memory": "1Gi",
            "cpu": "500m"
          },
          "env": {
            "LOG_LEVEL": "DEBUG",
            "LLM_PROVIDER": "custom",
            "LLM_OPENAI_MODEL": "gpt-4o",
            "LLM_ANTHROPIC_MODEL": "claude-3-5-sonnet-20241022",
            "LLM_OPENROUTER_MODEL": "anthropic/claude-3.5-sonnet",
            "LLM_OPENROUTER_BASE_URL": "https://openrouter.ai/api/v1",
            "LLM_OLLAMA_MODEL": "llama3.1",
            "LLM_OLLAMA_BASE_URL": "http://localhost:11434",
            "LLM_AZURE_API_VERSION": "2024-02-15-preview",
            "LLM_CUSTOM_BASE_URL": "https://workflow.nodove.com/webhook/aidove",
            "LLM_CUSTOM_MODEL": "aidove",
            "LLM_CUSTOM_REQUEST_FORMAT": "{\"chatInput\": \"{prompt}\"}",
            "LLM_CUSTOM_RESPONSE_PATH": "reply"
          }
        },
        "production": {
          "replicas": 2,
          "resources": {
            "memory": "2Gi",
            "cpu": "1000m"
          },
          "env": {
            "LOG_LEVEL": "INFO",
            "LLM_PROVIDER": "custom",
            "LLM_OPENAI_MODEL": "gpt-4o",
            "LLM_ANTHROPIC_MODEL": "claude-3-5-sonnet-20241022",
            "LLM_OPENROUTER_MODEL": "anthropic/claude-3.5-sonnet",
            "LLM_OPENROUTER_BASE_URL": "https://openrouter.ai/api/v1",
            "LLM_OLLAMA_MODEL": "llama3.1",
            "LLM_OLLAMA_BASE_URL": "http://localhost:11434",
            "LLM_AZURE_API_VERSION": "2024-02-15-preview",
            "LLM_CUSTOM_BASE_URL": "https://workflow.nodove.com/webhook/aidove",
            "LLM_CUSTOM_MODEL": "aidove",
            "LLM_CUSTOM_REQUEST_FORMAT": "{\"chatInput\": \"{prompt}\"}",
            "LLM_CUSTOM_RESPONSE_PATH": "reply"
          }
        }
      }
    },
    
    "web-crawler": {
      "name": "Web Crawler",
      "description": "Crawl4AI web crawling service",
      "port": 11235,
      "healthcheck": "/health",
      "hostname": "web-crawler",
      "dependencies": [],
      "consul": {
        "register": true,
        "service_name": "web-crawler",
        "tags": ["crawler", "crawl4ai"]
      },
      "profiles": {
        "development": {
          "replicas": 1,
          "resources": {
            "memory": "1Gi",
            "cpu": "500m"
          },
          "env": {}
        },
        "staging": {
          "replicas": 1,
          "resources": {
            "memory": "2Gi",
            "cpu": "1000m"
          },
          "env": {}
        },
        "production": {
          "replicas": 1,
          "resources": {
            "memory": "2Gi",
            "cpu": "1000m"
          },
          "env": {}
        }
      }
    },
    
    "admin-dashboard": {
      "name": "Admin Dashboard",
      "description": "Administration dashboard API",
      "port": 8888,
      "healthcheck": "/health",
      "hostname": "admin-dashboard",
      "dependencies": ["postgres", "mongo"],
      "consul": {
        "register": true,
        "service_name": "admin-dashboard",
        "tags": ["admin", "dashboard", "python"]
      },
      "profiles": {
        "development": {
          "replicas": 1,
          "resources": {
            "memory": "256Mi",
            "cpu": "100m"
          },
          "env": {}
        },
        "staging": {
          "replicas": 1,
          "resources": {
            "memory": "512Mi",
            "cpu": "250m"
          },
          "env": {}
        },
        "production": {
          "replicas": 1,
          "resources": {
            "memory": "512Mi",
            "cpu": "250m"
          },
          "env": {}
        }
      }
    },
    
    "frontend": {
      "name": "Frontend",
      "description": "React/Vite frontend application",
      "port": 8080,
      "healthcheck": "/health",
      "hostname": "frontend",
      "dependencies": ["api-gateway"],
      "consul": {
        "register": false,
        "service_name": "frontend",
        "tags": ["frontend", "react", "nginx"]
      },
      "profiles": {
        "development": {
          "replicas": 1,
          "resources": {
            "memory": "128Mi",
            "cpu": "100m"
          },
          "env": {}
        },
        "staging": {
          "replicas": 1,
          "resources": {
            "memory": "256Mi",
            "cpu": "200m"
          },
          "env": {}
        },
        "production": {
          "replicas": 3,
          "resources": {
            "memory": "512Mi",
            "cpu": "500m"
          },
          "env": {}
        }
      }
    }
  },
  
  "service_urls": {
    "_comment": "Direct service URLs for API Gateway routing (used when Consul service discovery is unavailable)",
    "collector-service": "http://collector-service:8081",
    "browser-use-api": "http://browser-use-api:8500",
    "autonomous-crawler": "http://autonomous-crawler:8030",
    "web-crawler": "http://web-crawler:11235",
    "admin-dashboard": "http://admin-dashboard:8888",
    "sentiment-addon": "http://sentiment-addon:8100",
    "factcheck-addon": "http://factcheck-addon:8101",
    "bias-addon": "http://bias-addon:8102",
    "bot-detector": "http://bot-detector:8041",
    "ml-trainer": "http://ml-trainer:8090",
    "newsinsight-mcp": "http://newsinsight-mcp:5000",
    "bias-mcp": "http://bias-mcp:5001",
    "factcheck-mcp": "http://factcheck-mcp:5002",
    "topic-mcp": "http://topic-mcp:5003",
    "aiagent-mcp": "http://aiagent-mcp:5004",
    "huggingface-mcp": "http://huggingface-mcp:5011",
    "kaggle-mcp": "http://kaggle-mcp:5012",
    "mltraining-mcp": "http://mltraining-mcp:5013",
    "roboflow-mcp": "http://roboflow-mcp:5014",
    "ip-rotation": "http://ip-rotation:8050",
    "crawl-worker": "http://crawl-worker:8040",
    "maigret-worker": "http://maigret-worker:8020"
  },
  
  "ml-addons": {
    "sentiment-addon": {
      "name": "Sentiment Analysis Addon",
      "port": 8100,
      "healthcheck": "/health",
      "enabled": {
        "development": false,
        "staging": false,
        "production": true
      }
    },
    "factcheck-addon": {
      "name": "Fact Check Addon",
      "port": 8101,
      "healthcheck": "/health",
      "enabled": {
        "development": false,
        "staging": false,
        "production": true
      }
    },
    "bias-addon": {
      "name": "Bias Detection Addon",
      "port": 8102,
      "healthcheck": "/health",
      "enabled": {
        "development": false,
        "staging": false,
        "production": true
      }
    }
  },
  
  "infrastructure": {
    "postgres": {
      "image": "postgres:15-alpine",
      "port": 5432,
      "healthcheck": "pg_isready"
    },
    "mongo": {
      "image": "mongo:7",
      "port": 27017,
      "healthcheck": "mongosh --eval db.adminCommand('ping')"
    },
    "redis": {
      "image": "redis:7-alpine",
      "port": 6379,
      "healthcheck": "redis-cli ping"
    },
    "consul": {
      "image": "hashicorp/consul:1.18",
      "port": 8500,
      "healthcheck": "consul members"
    },
    "redpanda": {
      "image": "docker.redpanda.com/redpandadata/redpanda:latest",
      "port": 9092,
      "healthcheck": "rpk cluster health"
    }
  }
}
